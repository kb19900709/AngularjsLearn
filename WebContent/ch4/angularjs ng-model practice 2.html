<!DOCTYPE html>
<html ng-app="kbApp">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
  <meta charset="utf-8">
  <title>CH4</title>
  <style>
    .valid{
      color:red;
    }
  </style>
</head>
<body ng-controller="MainCtrl as ctrl">
  <!-- 
  	當在form上給予屬性 name，Angularjs會建立一個FormController
  	透過 formName.$helper or formName.field ...etc 取得對應的表單狀態
  	see >>> https://docs.angularjs.org/api/ng/type/form.FormController  	
   -->
  <form ng-submit="ctrl.submit()" name="myForm">
    name : 
      <input type="text" placeholder="enter your name" name="uName"
             ng-model="ctrl.user.userName" ng-minlength="3" required/>
      <span class="valid" ng-show="myForm.uName.$error.minlength">請輸入至少3個字元</span>
    <br/><br/>
    password : 
      <input type="password" placeholder="enter your password" name="uPassWord"
             ng-model="ctrl.user.passWord" ng-minlength="3" ng-maxlength="6" required/>
      <span class="valid" ng-show="myForm.uPassWord.$error.minlength">請輸入至少3個字元</span>
      <span class="valid" ng-show="myForm.uPassWord.$error.maxlength">請輸入至多6個字元</span>
    <br/><br/>
    age :
      <!-- 綁定的物件將會是整數型態 -->
      <input type="number" placeholder="enter your age" ng-model="ctrl.user.age"/>
    <br/><br/>
    birthday :
      <!-- 綁定的物件將會是 Date 型態 -->
      <input type="date" ng-model="ctrl.user.birthday"/>
    <br/><br/>
    <!-- 
    	如果表單狀態檢核有問題，則隱蔽功能 。
    	注意:即使在表單上宣告 ng-submit，在input欄位鍵入enter，一樣無效
    -->
    <button type="submit" ng-disabled="myForm.$invalid">Submit</button>
  </form>

  <script>
    var kbApp = angular.module('kbApp',[]);
    kbApp.controller('MainCtrl',[function(){
      var self = this;
      
      //顯示當前userObject資訊
      self.submit = function(){
        if(self.user){
          var userInfo = '';
          for(var prop in self.user){
            userInfo += prop+' : '+self.user[prop]+'\n'
          }
          alert('User Info\n'+userInfo);
        }
      }
    }]);
  </script>
</body>
</html>